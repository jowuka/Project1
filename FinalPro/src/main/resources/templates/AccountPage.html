<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> User profile</title>
	
    <link rel="shortcut icon" href="images/Image20230919173529.png">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/fontawsom-all.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" href="css/nicepage2.css" media="screen">
<link rel="stylesheet" href="css/ecology-1.css" media="screen">
 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body
    data-home-page="" data-home-page-title="ecology 1" data-path-to-root="./" class="u-body u-xl-mode" data-lang="it">
    <header class="u-clearfix u-header u-palette-5-dark-2 u-sticky u-sticky-0d4c u-header" id="sec-b289"><div class="u-clearfix u-sheet u-sheet-1">
        <a href="#" class="u-image u-logo u-image-1" data-image-width="583" data-image-height="428">
          <img src="images/Image20230919173529.png" class="u-logo-image u-logo-image-1">
        </a>
        <a href="./indexx" class="u-btn u-button-style u-text-palette-3-dark-1 u-btn-1">LOGOUT</a>
        <div class="u-list u-list-1">
          <div class="u-repeater u-repeater-1">
            <div class="u-container-style u-list-item u-repeater-item">
              <div class="u-container-layout u-similar-container u-valign-middle u-container-layout-1">
                <a href="./index" class="u-active-none u-border-2 u-border-active-palette-2-dark-1 u-border-hover-palette-2-base u-border-no-left u-border-no-right u-border-no-top u-border-palette-1-base u-btn u-button-style u-hover-none u-none u-text-hover-palette-2-base u-text-palette-1-base u-btn-2">HOME PAGE</a>
              </div>
            </div>
            <div class="u-container-style u-list-item u-repeater-item">
              <div class="u-container-layout u-similar-container u-valign-middle u-container-layout-2">
                <a href="./index#carousel_9cc2" class="u-active-none u-border-2 u-border-active-palette-2-dark-1 u-border-hover-palette-2-base u-border-no-left u-border-no-right u-border-no-top u-border-palette-1-base u-btn u-button-style u-hover-none u-none u-text-hover-palette-2-base u-text-palette-1-base u-btn-3">A CHI Ã¨ RIVOLTO</a>
              </div>
            </div>
            <div class="u-container-style u-list-item u-repeater-item">
              <div class="u-container-layout u-similar-container u-valign-middle u-container-layout-3">
                <a href="./index#carousel_1dbf" class="u-active-none u-border-2 u-border-active-palette-2-dark-1 u-border-hover-palette-2-base u-border-no-left u-border-no-right u-border-no-top u-border-palette-1-base u-btn u-button-style u-hover-none u-none u-text-hover-palette-2-base u-text-palette-1-base u-btn-4">CLASSE ENERGETICA</a>
              </div>
            </div>
            <div class="u-container-style u-list-item u-repeater-item">
              <div class="u-container-layout u-similar-container u-valign-middle u-container-layout-4">
                <a href="./index#sec-6dbd" class="u-active-none u-border-2 u-border-active-palette-2-dark-1 u-border-hover-palette-2-base u-border-no-left u-border-no-right u-border-no-top u-border-palette-1-base u-btn u-button-style u-hover-none u-none u-text-hover-palette-2-base u-text-palette-1-base u-btn-5">MISSIONE</a>
              </div>
            </div>
            <div class="u-container-style u-list-item u-repeater-item">
              <div class="u-container-layout u-similar-container u-valign-middle u-container-layout-5">
                <a href="./index#sec-4be1" class="u-active-none u-border-2 u-border-active-palette-2-dark-1 u-border-hover-palette-2-base u-border-no-left u-border-no-right u-border-no-top u-border-palette-1-base u-btn u-button-style u-hover-none u-none u-text-hover-palette-2-base u-text-palette-1-base u-btn-6">CHI SIAMO</a>
              </div>
            </div>
            
          </div>
          
        </div>
      </div></header> 
      <section class="u-clearfix u-image u-section-1" id="sec-0896" data-image-width="1600" data-image-height="838">      
    <div class="container-fluid overcover">
        <div class="container profile-box">
            <div class="top-cover">
                <div class="covwe-inn">
                    <div class="row no-margin">
                        <div class="col-md-3 img-c">
                            <img src="images/profile.jpg" alt="">
                        </div>
                        <div class="col-md-9 tit-det">
                            <h2 >Benvenut* <span th:text="${userName1}"></span></h2>
                        </div>
                        
                    </div>
                </div>
            </div>
            <ul class="nav nav-tabs" id="myTab" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Profilo</a>
              </li>
              <li class="nav-item">
                <a class="nav-link " id="profile-tab" data-toggle="tab" href="#resume" role="tab" aria-controls="profile" aria-selected="false">Ricerca</a>
             </li>
            </ul>
            <div class="tab-content" id="myTabContent">

              <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                  <div class="row no-margin home-det">
                      
               <div id="prod1" th:data-value="${prod1}"></div>
                     <div id="prod2" th:data-value="${prod2}"></div>     
                      <div id="prod3" th:data-value="${prod3}"></div> 
                      <div id="prod4" th:data-value="${prod4}"></div>     
                     <div id="prod5" th:data-value="${prod5}"></div>       
					<div id="prod6" th:data-value="${prod6}"></div>
                       <div id="prod7" th:data-value="${prod7}"></div>    
                          <div id="prod8" th:data-value="${prod8}"></div> 
                              
         <h1 style="color: white;">Cons</h1><h1>Consumo Elettrodomestici</h1>
        <canvas id="myChart" width="130%" height="65%"></canvas>
                      
                      
                  </div>
              </div>
              <div class="tab-pane fade exp-cover" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <div class="data-box">
                        <div class="sec-title">
                                      <h2>Profilo</h2>
                                </div>
                         <div class="row exp-row">
                             <h6>Username</h6>
                             <h6><span th:text="${userName1}"></span></h6>
                         </div>
                         <div class="row exp-row">
                             <h6>E-Mail</h6>
                             <h6><span th:text="${userEmail1}"></span></h6>
                         </div>
                         <div class="row exp-row last">
                             <h6>Numero di Telefono : </h6>
                             <h6><span th:text="${userTel1}"></span></h6>
                         </div>
                 </div>
                 
            </div>
            <div class="tab-pane fade exp-cover" id="resume" role="tabpanel" aria-labelledby="contact-tab">
                <div class="container mt-5">
      <h1>Ricerca Elettrodomestici</h1>
      <div class="row mb-3">
          <div class="col-md-3">
    
              <select class="form-select" id="categoriaSelect" style="height: 38px; " >
                  <option value="Asciugatrice"><span th:text="Asciugatrice"     ></span></option>
                  <option value="Boiler_elettrico"><span th:text="Boiler"       ></span></option>
                  <option value="Condizionatore"><span th:text="Condizionatore" ></span></option>
                  <option value="Forni"><span th:text="Forno" 					></span></option>
                  <option value="Frigorifero"><span th:text="Frigorifero" 		></span></option>
                  <option value="Illuminazione"><span th:text="Illuminazione"   ></span></option>
                  <option value="Lavastoviglie"><span th:text="Lavastoviglie" 	></span></option>
                  <option value="Lavatrice"><span th:text="Lavatrice" 			></span></option>
              </select>
          </div>
          
          <div class="col-md-3">
              <button class="btn btn-primary" onclick="bothFunc()">Cerca</button>
          </div>
      </div>
      <iframe id="myFrame" src="./tabella" style="width: 100%; height: 500px;"></iframe>
  </div>
        </div>
     </div>
  </div>
</section>  
  <footer class="u-clearfix u-footer u-palette-5-dark-2 u-footer" id="sec-b773"><div class="u-clearfix u-sheet u-sheet-1">
    <a href="/" class="u-image u-logo u-image-1" data-image-width="1280" data-image-height="731">
      <img src="images/gn.png" class="u-logo-image u-logo-image-1">
    </a>
    <div class="u-align-left u-social-icons u-spacing-10 u-social-icons-1">
      <a class="u-social-url" target="_blank" href=""><span class="u-icon u-icon-circle u-social-facebook u-social-icon u-icon-1"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112.2 112.2"><use xlink:href="#svg-34a0"></use></svg><svg x="0px" y="0px" viewBox="0 0 112.2 112.2" enable-background="new 0 0 112.2 112.2" xml:space="preserve" id="svg-34a0" class="u-svg-content"><path d="M75.5,28.8H65.4c-1.5,0-4,0.9-4,4.3v9.4h13.9l-1.5,15.8H61.4v45.1H42.8V58.3h-8.8V42.4h8.8V32.2 c0-7.4,3.4-18.8,18.8-18.8h13.8v15.4H75.5z"></path></svg></span>
      </a>
      <a class="u-social-url" target="_blank" href=""><span class="u-icon u-icon-circle u-social-icon u-social-twitter u-icon-2"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112.2 112.2"><use xlink:href="#svg-7920"></use></svg><svg x="0px" y="0px" viewBox="0 0 112.2 112.2" enable-background="new 0 0 112.2 112.2" xml:space="preserve" id="svg-7920" class="u-svg-content"><path d="M92.2,38.2c0,0.8,0,1.6,0,2.3c0,24.3-18.6,52.4-52.6,52.4c-10.6,0.1-20.2-2.9-28.5-8.2 c1.4,0.2,2.9,0.2,4.4,0.2c8.7,0,16.7-2.9,23-7.9c-8.1-0.2-14.9-5.5-17.3-12.8c1.1,0.2,2.4,0.2,3.4,0.2c1.6,0,3.3-0.2,4.8-0.7 c-8.4-1.6-14.9-9.2-14.9-18c0-0.2,0-0.2,0-0.2c2.5,1.4,5.4,2.2,8.4,2.3c-5-3.3-8.3-8.9-8.3-15.4c0-3.4,1-6.5,2.5-9.2 c9.1,11.1,22.7,18.5,38,19.2c-0.2-1.4-0.4-2.8-0.4-4.3c0.1-10,8.3-18.2,18.5-18.2c5.4,0,10.1,2.2,13.5,5.7c4.3-0.8,8.1-2.3,11.7-4.5 c-1.4,4.3-4.3,7.9-8.1,10.1c3.7-0.4,7.3-1.4,10.6-2.9C98.9,32.3,95.7,35.5,92.2,38.2z"></path></svg></span>
      </a>
      <a class="u-social-url" target="_blank" href=""><span class="u-icon u-icon-circle u-social-icon u-social-instagram u-icon-3"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112.2 112.2"><use xlink:href="#svg-4349"></use></svg><svg x="0px" y="0px" viewBox="0 0 112.2 112.2" enable-background="new 0 0 112.2 112.2" xml:space="preserve" id="svg-4349" class="u-svg-content"><path d="M55.9,32.9c-12.8,0-23.2,10.4-23.2,23.2s10.4,23.2,23.2,23.2s23.2-10.4,23.2-23.2S68.7,32.9,55.9,32.9z M55.9,69.4c-7.4,0-13.3-6-13.3-13.3c-0.1-7.4,6-13.3,13.3-13.3s13.3,6,13.3,13.3C69.3,63.5,63.3,69.4,55.9,69.4z"></path><path d="M79.7,26.8c-3,0-5.4,2.5-5.4,5.4s2.5,5.4,5.4,5.4c3,0,5.4-2.5,5.4-5.4S82.7,26.8,79.7,26.8z"></path><path d="M78.2,11H33.5C21,11,10.8,21.3,10.8,33.7v44.7c0,12.6,10.2,22.8,22.7,22.8h44.7c12.6,0,22.7-10.2,22.7-22.7 V33.7C100.8,21.1,90.6,11,78.2,11z M91,78.4c0,7.1-5.8,12.8-12.8,12.8H33.5c-7.1,0-12.8-5.8-12.8-12.8V33.7 c0-7.1,5.8-12.8,12.8-12.8h44.7c7.1,0,12.8,5.8,12.8,12.8V78.4z"></path></svg></span>
      </a>
      <a class="u-social-url" target="_blank" href=""><span class="u-icon u-icon-circle u-social-icon u-social-linkedin u-icon-4"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112.2 112.2"><use xlink:href="#svg-edc8"></use></svg><svg x="0px" y="0px" viewBox="0 0 112.2 112.2" enable-background="new 0 0 112.2 112.2" xml:space="preserve" id="svg-edc8" class="u-svg-content"><path d="M33.8,96.8H14.5v-58h19.3V96.8z M24.1,30.9L24.1,30.9c-6.6,0-10.8-4.5-10.8-10.1c0-5.8,4.3-10.1,10.9-10.1 S34.9,15,35.1,20.8C35.1,26.4,30.8,30.9,24.1,30.9z M103.3,96.8H84.1v-31c0-7.8-2.7-13.1-9.8-13.1c-5.3,0-8.5,3.6-9.9,7.1 c-0.6,1.3-0.6,3-0.6,4.8V97H44.5c0,0,0.3-52.6,0-58h19.3v8.2c2.6-3.9,7.2-9.6,17.4-9.6c12.7,0,22.2,8.4,22.2,26.1V96.8z"></path></svg></span>
      </a>
    </div>
    <img class="u-image u-image-default u-image-2" src="images/gen1.png" alt="" data-image-width="655" data-image-height="405">
    <p class="u-align-center u-text u-text-palette-5-light-2 u-text-1">Tutti i diritti sono riservati Â©GenEnergy 2023</p>
  </div></footer>

    
</body>


<script src="js/jquery-3.2.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script class="u-script" type="text/javascript" src="jquery-1.9.1.min.js" defer=""></script>
<script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
<script>
	function IDPro(idx) {

					var idP = document.getElementById(idx).value;
					console.log(idP);
					var orario = document.getElementById("Utilizzo");
				
				fetch('/IdProo', {
			method: 'POST',
			headers: { 'Content-Type': 'application/json' },
			body: JSON.stringify({IDPRO: idP, Orario: orario})
		})
			.then(response => response.text())
			.then(data => {
				console.log("risposta dal server : " + data);
			})
			.catch(error => {
				console.error("Errore nella Richiesta : " + error);
			});
			
      	  }
    function searchByCategoria() {
            const categoria = document.getElementById("categoriaSelect").value;
            
            var table = '<thead><tr><th>Marca</th><th>Modello</th><th>Classe</th><th>Consumo</th><th>Id</th></tr><tr th:each="Prodotti : ${Prodotto}"><td th:text="${Prodotti.Marca}"></td><td th:text="${Prodotti.Classe}"></td><td th:text="${Prodotti.Modello}"></td><td th:text="${Prodotti.Consumo}"></td><td ><button th:attr="onclick=|IDPro(\'${Prodotti.id}\')|" th:id="${Prodotti.id}" th:value="${Prodotti.id}" >Seleziona</button></td></tr></thead>';
            
            
        fetch('/Product', {
			method: 'POST',
			headers: { 'Content-Type': 'application/json' },
			body: JSON.stringify({ Cat: categoria})
		})
			.then(response => response.text())
			.then(data => {
				console.log("risposta dal server : " + data);
			})
			.catch(error => {
				console.error("Errore nella Richiesta : " + error);
			});
			document.getElementById("myFrame").innerHTML = table;
      	  }
</script>
<script>
        function changeIframeSource() {
            var iframe = document.getElementById('myFrame');
            iframe.contentWindow.location.reload()
        }
    </script>
	<script>
		function bothFunc() {
			searchByCategoria()
			changeIframeSource()
		}
	</script>
	<script>
        const Values1 = parseInt(document.getElementById("prod1").getAttribute("data-value"));
        const Values2 = parseInt(document.getElementById("prod2").getAttribute("data-value"));
        const Values3 = parseInt(document.getElementById("prod3").getAttribute("data-value"));
        const Values4 = parseInt(document.getElementById("prod4").getAttribute("data-value"));
        const Values5 = parseInt(document.getElementById("prod5").getAttribute("data-value"));
        const Values6 = parseInt(document.getElementById("prod6").getAttribute("data-value"));
        const Values7 = parseInt(document.getElementById("prod7").getAttribute("data-value"));
        const Values8 = parseInt(document.getElementById("prod8").getAttribute("data-value"));
        console.log(Values3)
        var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Asciugatrice', 'Boiler elettrico', 'Condizionatore', 'Forno elettrico', 'Frigorifero', 'Illuminazione', 'Lavastoviglie', 'Lavatrice'],
                datasets: [{
                    label: 'Consumo (kWh)',
                    data: [Values1,Values2,Values3,Values4,Values5,Values6,Values7,Values8],
                    backgroundColor: [
            		calculateBackgroundColor(Values1),
            		calculateBackgroundColor(Values2), 
                    calculateBackgroundColor(Values3),
                    calculateBackgroundColor(Values4),
                    calculateBackgroundColor(Values5),
                    calculateBackgroundColor(Values6),
                    calculateBackgroundColor(Values7),
                    calculateBackgroundColor(Values8),                    
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(255, 206, 86, 1)',
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                    }
                }
            }
        });
        function calculateBackgroundColor(value) {
        if (value > 70) {
            return 'rgba(255, 99, 132, 0.5)'; // Red
        } else if (value > 50) {
            return 'rgba(255, 206, 86, 0.5)'; // Yellow
        } else {
            return 'rgba(75, 192, 192, 0.5)';  // Green
        }
    }
    </script>
</html>